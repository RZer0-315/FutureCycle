<!DOCTYPE html>
<html>
  <head>
    <title>Future Cycle</title>
    <link rel="icon" href="../assets/Merlin2525-Futuristic-Gun-3175454871.png">
    <link rel="stylesheet" href="../stylesheets/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Rubik+Glitch&display=swap" rel="stylesheet">
    <style>
      #hud{position:fixed;top:10px;right:10px;background:#111a;border:1px solid #444;padding:.5rem .75rem;border-radius:.5rem;font-family:monospace}
      #nav{margin-top:1rem}
    </style>
  </head>
  <body id="overworld">
    <h1>Where should we get started?</h1>
    <div id="hud"></div>

    <ul id="nav">
      <li><a href="downtown.html">Downtown</a></li>
      <li><a href="mlCorp.html">Moria/Louigi Corporation HQ</a></li>
      <li><a href="hideout.html">Hideout</a></li>
    </ul>

    <script>
      // Parse stats from query string
      const params = new URLSearchParams(location.search);
      let cr  = +params.get('cr')  || 0;
      let hp  = +params.get('hp')  || 0;
      let str = +params.get('str') || 0;
      let tch = +params.get('tch') || 0;

      // Stats HUD
      const hud = document.getElementById('hud');
      function updateHUD(){ hud.textContent = `CR:${cr}  HP:${hp}  STR:${str}  TECH:${tch}`; }
      updateHUD();

      // Append stats to all nav links
      function propagate(selector){
        const qs = `?cr=${cr}&hp=${hp}&str=${str}&tch=${tch}`;
        document.querySelectorAll(selector).forEach(a=>{
          const href = a.getAttribute('href') || '';
          a.setAttribute('href', href + (href.includes('?') ? '&' : '?') + qs.slice(1));
        });
      }
      propagate('#nav a');
    </script>
  </body>
</html>
